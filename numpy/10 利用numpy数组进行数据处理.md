### 10. 利用numpy数组进行数据处理
NumPy数组使你可以将许多种数据处理任务表述为简洁的数组表达式（否则需要编写循环）。用
数组表达式代替循环的做法，通常被称为矢量化。一般来说，矢量化数组运算要比等价的纯
Python方式快上一两个数量级（甚至更多），尤其是各种数值计算。在后面内容中（见附录A）我
将介绍广播，这是一种针对矢量化计算的强大手段。
作为简单的例子，假设我们想要在一组值（网格型）上计算函数 `sqrt(x^2+y^2)` 。`np.meshgrid`函
数接受两个一维数组，并产生两个二维矩阵（对应于两个数组中所有的`(x,y)`对）：
```python
points = np.arange(-5, 5, 0.01) # 1000 equally spaced points

# 第一个参数以行来堆叠， 第二个参数以列来堆叠
xs, ys = np.meshgrid(points, points)
ys
Output: array([[-5. , -5. , -5. , ..., -5. , -5. , -5. ],
                [-4.99, -4.99, -4.99, ..., -4.99, -4.99, -4.99],
                [-4.98, -4.98, -4.98, ..., -4.98, -4.98, -4.98],
                ...,
                [ 4.97, 4.97, 4.97, ..., 4.97, 4.97, 4.97],
                [ 4.98, 4.98, 4.98, ..., 4.98, 4.98, 4.98],
                [ 4.99, 4.99, 4.99, ..., 4.99, 4.99, 4.99]])

xs
Output: array([[-5.   -4.99 -4.98 ...  4.97  4.98  4.99],
                [-5.   -4.99 -4.98 ...  4.97  4.98  4.99],
                [-5.   -4.99 -4.98 ...  4.97  4.98  4.99],
                ...,
                [-5.   -4.99 -4.98 ...  4.97  4.98  4.99],
                [-5.   -4.99 -4.98 ...  4.97  4.98  4.99],
                [-5.   -4.99 -4.98 ...  4.97  4.98  4.99]])
```
可以通过数组上的一组数学函数对整个数组或某个轴向的数据进行统计计算。`sum`、`mean`以及标
准差`std`等聚合计算（aggregation，通常叫做约简（reduction））既可以当做数组的实例方法调
用，也可以当做顶级NumPy函数使用。
这里，我生成了一些正态分布随机数据，然后做了聚类统计：
```python
arr = np.random.randn(5, 4)
arr
Output: array([[ 2.1695, -0.1149, 2.0037, 0.0296],
                [ 0.7953, 0.1181, -0.7485, 0.585 ],
                [ 0.1527, -1.5657, -0.5625, -0.0327],
                [-0.929 , -0.4826, -0.0363, 1.0954],
                [ 0.9809, -0.5895, 1.5817, -0.5287]])

arr.mean()
Output:  0.19607051119998253

np.mean(arr)
Output:  0.19607051119998253

arr.sum()
Output: 3.9214102239996507
```
`mean`和`sum`这类的函数可以接受一个`axis`选项参数，用于计算该轴向上的统计值，最终结果是一
个少一维的数组：
```python
arr.mean(axis=1)
Output: array([ 1.022 , 0.1875, -0.502 , -0.0881, 0.3611])

arr.sum(axis=0)
Output:  array([ 3.1693, -2.6345, 2.2381, 1.1486])
```
这里，`arr.mean(axis=1)`是“计算行的平均值”，`arr.sum(axis=0)`是“计算每列的和”。
其他如cumsum和cumprod之类的方法则不聚合，而是产生一个由中间结果组成的数组：
```python
arr = np.array([0, 1, 2, 3, 4, 5, 6, 7])
arr.cumsum()
Output: array([ 0, 1, 3, 6, 10, 15, 21, 28])
```
在多维数组中，累加函数（如cumsum）返回的是同样大小的数组，但是会根据每个低维的切片沿
着标记轴计算部分聚类：
```python
arr = np.array([[0, 1, 2], [3, 4, 5], [6, 7, 8]])
arr
Output: array([[0, 1, 2],
                [3, 4, 5],
                [6, 7, 8]])

arr.cumsum(axis=0)
Output:array([[ 0, 1, 2],
            [ 3, 5, 7],
            [ 9, 12, 15]])

arr.cumprod(axis=1)
Output:array([[ 0, 0, 0],
                [ 3, 12, 60],
                [ 6, 42, 336]])
```

常用的数组统计方法
|方法|说明|
|---|----|
|sum|对数组中全部或某轴向的元素求和
|mean|算术平均数
|std, var|分别为标准差和方差
|min, max|最大值和最小值
|argmin, rgmax|最大和最小元素的索引
